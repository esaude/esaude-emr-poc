<form name="vm.form" class="form-horizontal">

  <div class="panel panel-primary content-border-margin">

    <div class="panel-heading">
      <h3 class="panel-title">{{'PATIENT_INFO_ADDRESS' | translate}}</h3>
    </div>

    <div class="panel-body">

        <div class="form-group form-group-lg" ng-repeat="addressLevel in vm.addressLevels">

          <label for="{{addressLevel.addressField}}" class="col-sm-2 control-label">{{addressLevel.name | translate}}
          <span class="asterick" ng-show="addressLevel.required">*</span></label>

          <div class="col-sm-10"
               ng-class="{'has-error': vm.form[addressLevel.addressField].$invalid && vm.shouldShowMessages()}">

            <div ng-messages for="vm.form[addressLevel.addressField].$error" ng-show="vm.shouldShowMessages()">
              <div ng-messages-include="../common/application/views/error-messages.html"></div>
            </div>

            <input type="text" name="{{addressLevel.addressField}}" id="{{addressLevel.addressField}}"
                   class="form-control keyboard-in"
                   ng-required="{{addressLevel.required}}"
                   ng-model="vm.patient.address[addressLevel.addressField]"
                   uib-typeahead="entry.name for entry in vm.getAddressEntryList(addressLevel.addressField, $viewValue)"
                   typeahead-on-select="vm.addressFieldSelected(addressLevel.addressField, $item)"
                   ng-change="vm.clearFields(addressLevel.addressField)"
                   ng-pattern="/^([a-zA-Z0-9\s]|[\)\(\'\/\-\.])*$/"
                   autocomplete="off"
                   ng-maxlength="{{addressLevel.addressField === 'country' ? 50 : 255}}"
                   maxlength="{{addressLevel.addressField === 'country' ? 50 : 255}}">
          </div>
        </div>

    </div>

  </div>

</form>
